---
import LogoutIcon from '@lucide/astro/icons/log-out'
---

<header class="flex justify-end p-4">
  <button
    class="flex cursor-pointer gap-2 hover:opacity-50"
    type="submit"
    id="logoutBtn"
  >
    Log out <LogoutIcon stroke-width={1} />
  </button>
</header>

<script>
  import { actions } from 'astro:actions'
  import { navigate } from 'astro:transitions/client'

  const btn = document.querySelector('#logoutBtn')

  btn?.addEventListener('click', async () => {
    await actions.user.logout()
    navigate('/login')
  })
</script>
