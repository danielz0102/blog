---
import LogoutIcon from '@lucide/astro/icons/log-out'
import Newspaper from '@lucide/astro/icons/newspaper'
import Button from './Button.astro'
---

<header
  class="flex flex-wrap items-center justify-center gap-2 p-4 md:justify-between"
>
  <h2 class="text-2xl font-semibold"><a href="/">Blog Management</a></h2>
  <a href="/create" class="flex gap-2 text-zinc-800 hover:underline">
    Create a new post <Newspaper stroke-width={1} />
  </a>
  <Button variant="secondary" type="submit" id="logoutBtn">
    Log out <LogoutIcon stroke-width={1} />
  </Button>
</header>

<script>
  import { actions } from 'astro:actions'
  import { navigate } from 'astro:transitions/client'

  const btn = document.querySelector('#logoutBtn')

  btn?.addEventListener('click', async () => {
    await actions.user.logout()
    navigate('/login')
  })
</script>
